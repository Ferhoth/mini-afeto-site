<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pedido - Mini Afeto</title>
  <style>
    body { font-family: Arial, sans-serif; background: #fdf6f0; margin: 0; padding: 20px; }
    h1 { color: #ff6f61; }
    .hidden { display: none; }
    .thumbs img {
      width: 80px; height: 80px; object-fit: cover; border-radius: 5px; margin: 5px;
    }
    .thumbs { display: flex; flex-wrap: wrap; gap: 10px; }
    button { padding: 10px 20px; background: #ff6f61; color: #fff; border: none; border-radius: 8px; cursor: pointer; }
    select, input[type="file"] { margin-bottom: 15px; }
  </style>
</head>
<body>

<h1>Faça seu pedido</h1>

<label>Escolha a quantidade:</label>
<select id="quantidade">
  <option value="0">Selecione...</option>
  <option value="1">1 ímã</option>
  <option value="3">3 ímãs</option>
  <option value="9">9 ímãs</option>
</select>

<div id="uploadArea" class="hidden">
  <p>Envie suas imagens (máx. <span id="max"></span>)</p>
  <input type="file" id="imagens" multiple accept="image/*">
  <div class="thumbs" id="preview"></div>
  <button onclick="finalizar()">Finalizar Pedido e Pagar</button>
</div>

<script>
  const select = document.getElementById("quantidade");
  const uploadArea = document.getElementById("uploadArea");
  const imagensInput = document.getElementById("imagens");
  const preview = document.getElementById("preview");
  const maxSpan = document.getElementById("max");

  let maxFotos = 0;
  let arquivos = [];

  select.addEventListener("change", () => {
    maxFotos = parseInt(select.value);
    if (maxFotos > 0) {
      uploadArea.classList.remove("hidden");
      maxSpan.textContent = maxFotos;
    } else {
      uploadArea.classList.add("hidden");
    }
  });

  imagensInput.addEventListener("change", (e) => {
    const files = Array.from(e.target.files);
    preview.innerHTML = "";
    arquivos = files.slice(0, maxFotos); // limita quantidade
    arquivos.forEach(file => {
      const reader = new FileReader();
      reader.onload = (event) => {
        const img = document.createElement("img");
        img.src = event.target.result;
        preview.appendChild(img);
      };
      reader.readAsDataURL(file);
    });
  });

  function finalizar() {
    if (arquivos.length !== maxFotos) {
      alert(`Por favor, envie exatamente ${maxFotos} imagem(ns).`);
      return;
    }
    alert("Pedido finalizado! (Integração de pagamento virá aqui)");
  }
</script>

</body>
</html>
